(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{8690:function(e,s,t){Promise.resolve().then(t.bind(t,3761))},3761:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var a=t(7437),n=t(3182),r=t(8494),c=t(3145),l=t(2265),i=t(9376),d=t(1186),o=t(8575),h=t(2946),u=t(4708);function m(){let[e,s]=(0,l.useState)(!1),t=(0,i.useRouter)(),n=(0,o.I0)(),[r,c]=(0,l.useState)({phone:"",address:""}),m=(0,o.v9)(e=>e.basket.basket),x=e=>{let{name:s,value:t}=e.target;c({...r,[s]:t})};return(0,a.jsx)(a.Fragment,{children:e?(0,a.jsx)(u.Z,{style:{}}):(0,a.jsxs)("section",{className:"order",children:[(0,a.jsx)("h2",{className:"text-center",children:"Оформить заказ"}),(0,a.jsx)("div",{className:"card",style:{maxWidth:"30rem",margin:"0 auto"},children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(!0),(0,d.mv)({owner:r,items:m.map(e=>({id:e.id,price:e.price,count:e.quantity}))}).then(()=>{localStorage.removeItem("basket"),n((0,h.QB)([])),c({phone:"",address:""}),s(!1),t.push("/success")},e=>console.log(e.message))},className:"card-body",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"phone",children:"Телефон"}),(0,a.jsx)("input",{onChange:x,value:r.phone,name:"phone",className:"form-control",id:"phone",placeholder:"Ваш телефон"})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"address",children:"Адрес доставки"}),(0,a.jsx)("input",{onChange:x,value:r.address,name:"address",className:"form-control",id:"address",placeholder:"Адрес доставки"})]}),(0,a.jsxs)("div",{className:"form-group form-check",children:[(0,a.jsx)("input",{type:"checkbox",className:"form-check-input",id:"agreement"}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"agreement",children:"Согласен с правилами доставки"})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-outline-secondary",children:"Оформить"})]})})]})})}var x=t(1485);function j(){let e=(0,o.I0)(),s=(0,o.v9)(e=>e.basket.basket),t=(0,o.v9)(x.g);(0,l.useEffect)(()=>{let s=localStorage.getItem("basket");if(s){let t=JSON.parse(s);e((0,h.QB)(t))}},[e]);let n=s=>{e((0,h.O4)(s))};return(0,a.jsxs)("table",{className:"table table-bordered",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",children:"#"}),(0,a.jsx)("th",{scope:"col",children:"Название"}),(0,a.jsx)("th",{scope:"col",children:"Размер"}),(0,a.jsx)("th",{scope:"col",children:"Кол-во"}),(0,a.jsx)("th",{scope:"col",children:"Стоимость"}),(0,a.jsx)("th",{scope:"col",children:"Итого"}),(0,a.jsx)("th",{scope:"col",children:"Действия"})]})}),(0,a.jsxs)("tbody",{children:[s.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{scope:"row",children:s+1}),(0,a.jsx)("td",{children:e.title}),(0,a.jsx)("td",{children:e.size}),(0,a.jsx)("td",{children:e.quantity}),(0,a.jsx)("td",{children:e.price}),(0,a.jsx)("td",{children:e.price*e.quantity}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{onClick:()=>{n(e.id)},className:"btn btn-outline-danger btn-sm",children:"Удалить"})})]},s)),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:5,className:"text-right",children:"Общая стоимость"}),(0,a.jsx)("td",{children:t})]})]})]})}var p=t(2721);function b(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{}),(0,a.jsx)("main",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col",children:[(0,a.jsxs)("div",{className:"banner",children:[(0,a.jsx)(c.default,{src:p.default,className:"img-fluid",alt:"К весне готовы!"}),(0,a.jsx)("h2",{className:"banner-header",children:"К весне готовы!"})]}),(0,a.jsxs)("section",{className:"cart",children:[(0,a.jsx)("h2",{className:"text-center",children:"Корзина"}),(0,a.jsx)(j,{})]}),(0,a.jsx)(m,{})]})})}),(0,a.jsx)(r.default,{})]})}},4708:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(7437);function n(e){let{style:s}=e;return(0,a.jsx)("div",{style:s,className:"preloader_container",children:(0,a.jsxs)("div",{className:"preloader",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})})}},2946:function(e,s,t){"use strict";t.d(s,{Cy:function(){return a},O4:function(){return r},QB:function(){return n},gn:function(){return c}});let a=(0,t(1455).oM)({name:"basket",initialState:{basket:[],isLoading:!0},reducers:{setProductToBasket:(e,s)=>{e.basket.some(e=>e.id===s.payload.id)?e.basket.forEach(e=>{e.id===s.payload.id&&e.size===s.payload.size&&(e.quantity+=s.payload.quantity)}):e.basket=[...e.basket,s.payload]},setBasket:(e,s)=>{e.basket=s.payload},deleteProductFromBasket:(e,s)=>{e.basket=e.basket.filter(e=>e.id!==s.payload)}}});a.reducer;let{setBasket:n,deleteProductFromBasket:r,setProductToBasket:c}=a.actions}},function(e){e.O(0,[948,552,661,971,117,744],function(){return e(e.s=8690)}),_N_E=e.O()}]);